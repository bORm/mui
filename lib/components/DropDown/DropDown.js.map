{"version":3,"sources":["components/DropDown/DropDown.js"],"names":["DropDown","props","state","isOpen","rect","maxHeight","placement","control","handleClickOutside","debounceFn","getHiddenMenuOffset","setState","handleMenuToggle","onChange","autoClose","children","className","toggle","other","ref","onMouseDown","e","value","timeOut","setTimeout","clearTimeout","handleMenuExpand","handleMenuCollapse","refs","window","addEventListener","removeEventListener","prevProps","getBoundingClientRect","cords","top","left","bottom","document","documentElement","clientHeight","right","clientWidth","maxWidth","menu","propTypes","element","bool","oneOfType","func","defaultProps","Item"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAIA;;;;;;AAGA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;;;IAEMA,Q;;;AAyBL,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA,wIACZA,KADY;;AAElB,QAAKC,KAAL,GAAa;AACZC,WAAQF,MAAME,MAAN,IAAgB,KADZ;AAEZC,SAAM,EAFM;AAGZC,cAAW,CAHC;AAIZC,cAAW;AAJC,GAAb;;AAOA,QAAKC,OAAL,GAAe,IAAf;AACA,QAAKC,kBAAL,GAA4B,MAAKA,kBAAjC;AACA,QAAKC,UAAL,GAAkB,sBAAW,MAAKC,mBAAhB,cAAqC,GAArC,CAAlB;AAXkB;AAYlB;;;;4CAEyBT,K,EAAM;AAC/B,OAAK,KAAKC,KAAL,CAAWC,MAAX,KAAsBF,MAAME,MAAjC,EAA0C;AACzC,SAAKQ,QAAL,CAAc;AACbR,aAAQF,MAAME;AADD,KAAd,EAEK,KAAKS,gBAFV,MAEK,IAFL;AAGA;AACD;;;2BAEQ;AAAA;;AAAA,gBAEwE,KAAKX,KAF7E;AAAA,OAEAM,OAFA,UAEAA,OAFA;AAAA,OAESM,SAFT,UAESA,QAFT;AAAA,OAEmBC,SAFnB,UAEmBA,SAFnB;AAAA,OAE8BC,QAF9B,UAE8BA,QAF9B;AAAA,OAEwCC,SAFxC,UAEwCA,SAFxC;AAAA,OAEmDC,MAFnD,UAEmDA,MAFnD;AAAA,OAE8DC,KAF9D;AAAA,gBAGiC,KAAKhB,KAHtC;AAAA,OAGAC,MAHA,UAGAA,MAHA;AAAA,OAGQE,SAHR,UAGQA,SAHR;AAAA,OAGmBC,SAHnB,UAGmBA,SAHnB;;;AAKR,UACC;AAAA;AAAA,MAAK,WAAW,0BAAW,MAAX,EAAmBU,SAAnB,EAA8B;AAC7Cb;AAD6C,MAA9B,CAAhB;AAGG,6BAAaI,OAAb,EAAsB;AACvBY,UAAK,SADkB;AAEvBH,gBAAW,cAFY;AAGvBI,kBAAa,wBAAG;AACT,aAAKT,QAAL,CAAc;AACnBR,eAAQc,SAAS,CAACd,MAAV,GAAmB;AADR,OAAd,EAED,OAAKS,gBAFJ;AAGN;AAPsB,KAAtB,CAHH;AAYC;AAAA;AAAA,OAAK,KAAI,WAAT,EAAqB,WAAW,0BAAW,gBAAX,EAA6BN,SAA7B,CAAhC;AACC;AAAA;AAAA,QAAM,KAAI,MAAV,EAAiB,WAAU,WAA3B,EAAuC,OAAO,EAACD,oBAAD,EAA9C,EAA2D,UAAU,kBAACgB,CAAD,EAAIC,KAAJ,EAAY;AAC9EnB,kBAAUU,SAAZ,IAA0BA,UAASQ,CAAT,EAAYC,KAAZ,CAA1B;AACA,YAAIC,UAAU,IAAd;AACAA,kBAAUC,WAAW,YAAM;AAC1B,aAAK,gCAAL,EAAuB;AACtBV,uBAAa,OAAKH,QAAL,CAAc,EAACR,QAAQ,KAAT,EAAd,CAAb;AACA;AACDsB,sBAAaF,OAAb;AACA,SALS,EAKP,GALO,CAAV;AAMA,QATD;AAUGR;AAVH;AADD;AAZD,IADD;AA6BA;;;mCAEgBM,C,EAAG;AAAA,OACXlB,MADW,GACA,KAAKD,KADL,CACXC,MADW;;AAEnB,UAAOA,SACJ,KAAKuB,gBAAL,CAAsBL,CAAtB,CADI,GAEJ,KAAKM,kBAAL,CAAwBN,CAAxB,CAFH;AAGA;;;qCAEkBA,C,EAAG;AAAA,OACblB,MADa,GACF,KAAKD,KADH,CACbC,MADa;;AAErB,OAAKA,UAAU,KAAKF,KAAL,CAAWO,kBAA1B,EAA+C;AAC9C,SAAKG,QAAL,CAAc,EAACR,QAAQ,CAACA,MAAV,EAAd;AACA;AACD;;;qCAEiB;AACjB,QAAKO,mBAAL;AACA;;;uCAEmB,CAEnB;;;sCAEkB;AAClB,QAAKH,OAAL,GAAe,2BAAY,KAAKqB,IAAL,CAAUrB,OAAtB,CAAf;AACA,QAAKG,mBAAL;AACAmB,UAAOC,gBAAP,CAAwB,QAAxB,EAAkC,KAAKrB,UAAvC;AACA;;;yCAEsB;AACtBoB,UAAOE,mBAAP,CAA2B,QAA3B,EAAqC,KAAKtB,UAA1C;AACA;;;qCAEkBuB,S,EAAW;AAAA,OACrB7B,MADqB,GACV,KAAKF,KADK,CACrBE,MADqB;;AAE7B,OAAIA,WAAW6B,UAAU7B,MAAzB,EAAiC;AAChC,SAAKS,gBAAL;AACA;AACD;;;wCAEoB;AACpB,OAAMR,OAAO,KAAKG,OAAL,CAAa0B,qBAAb,EAAb;;AAEA,OAAMC,QAAQ;AACbC,SAAK/B,KAAK+B,GADG;AAEbC,UAAMhC,KAAKgC,IAFE;AAGbC,YAAQC,SAASC,eAAT,CAAyBC,YAAzB,GAAyCpC,KAAK+B,GAHzC;AAIbM,WAAOH,SAASC,eAAT,CAAyBG,WAAzB,GAAwCtC,KAAKgC;AAJvC,IAAd;;AAOA,OAAI/B,YAAY6B,MAAMG,MAAtB;AAAA,OACGM,WAAWT,MAAME,IADpB;AAAA,OAEG9B,kBAFH;;AAIA;AACA,OAAID,YAAY,2BAAY,KAAKuB,IAAL,CAAUgB,IAAtB,EAA4BJ,YAA5B,GAA2C,EAAvD,IAA6DN,MAAMC,GAAN,GAAYD,MAAMG,MAAnF,EAA2F;AAC1FhC,gBAAY6B,MAAMC,GAAlB;AACA7B,gBAAY,MAAZ;AACA,IAHD,MAGO;AACNA,gBAAY,SAAZ;AACA;;AAED;AACA,OAAIqC,WAAW,2BAAY,KAAKf,IAAL,CAAUgB,IAAtB,EAA4BF,WAA5B,GAA0C,EAArD,IAA2DR,MAAME,IAAN,GAAaF,MAAMO,KAAlF,EAAyF;AACxFnC,iBAAa,MAAb;AACA,IAFD,MAEO;AACNA,iBAAa,OAAb;AACA;;AAED,QAAKK,QAAL,CAAc,EAACP,UAAD,EAAOC,oBAAP,EAAkBC,oBAAlB,EAAd;AACA;;;4BAtJMuC,S,GAAY;AAClBtC,UAAS,iBAAUuC,OADD;AAElB3C,SAAQ,iBAAU4C,IAFA;AAGhBjC,YAAW,iBAAUiC,IAHL;AAIlBvC,qBAAoB,iBAAUuC,IAJZ;AAKhB9B,SAAQ,iBAAU8B,IALF;AAMlBlC,WAAU,iBAAUmC,SAAV,CAAoB,CAC7B,iBAAUD,IADmB,EACb,iBAAUE,IADG,CAApB;AANQ,C,SAWZC,Y,GAAe;AACrB3C,UACC,kDAAQ,MAAM,WAAd,GAFoB;AAIrBJ,SAAQ,KAJa;AAKrBW,YAAW,IALU;AAMrBN,qBAAoB,IANC;AAOnBS,SAAQ,IAPW;AAQrBJ,WAAU;AARW,C;kBA+IR,mCAAeb,QAAf,EAAyB,kCAAzB,C;QACNmD,I","file":"DropDown.js","sourcesContent":["import React, {\n\tComponent, PropTypes,\n\tcloneElement, isValidElement\n} from 'react'\nimport { findDOMNode } from 'react-dom';\n\nimport Button, { ButtonIcon } from 'components/Button/Button'\nimport Menu, { Item } from './Menu'\nimport classNames from 'helpers/classNames'\nimport isMounted from 'helpers/isMounted'\n\nimport Debounce from 'lodash.debounce'\nimport onClickOutside  from 'react-onclickoutside'\n\nclass DropDown extends Component {\n\n\tstatic propTypes = {\n\t\tcontrol: PropTypes.element,\n\t\tisOpen: PropTypes.bool,\n    autoClose: PropTypes.bool,\n\t\thandleClickOutside: PropTypes.bool,\n    toggle: PropTypes.bool,\n\t\tonChange: PropTypes.oneOfType([\n\t\t\tPropTypes.bool, PropTypes.func\n\t\t])\n\t};\n\n\tstatic defaultProps = {\n\t\tcontrol: (\n\t\t\t<Button icon={'more_vert'} />\n\t\t),\n\t\tisOpen: false,\n\t\tautoClose: true,\n\t\thandleClickOutside: true,\n    toggle: true,\n\t\tonChange: false,\n\t\t//outsideClickIgnoreClass: 'react-datepicker-ignore-onclickoutside'\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisOpen: props.isOpen || false,\n\t\t\trect: {},\n\t\t\tmaxHeight: 0,\n\t\t\tplacement: 'top-left'\n\t\t};\n    \n\t\tthis.control = null;\n\t\tthis.handleClickOutside = ::this.handleClickOutside;\n\t\tthis.debounceFn = Debounce(::this.getHiddenMenuOffset, 250);\n\t}\n\n\tcomponentWillReceiveProps(props){\n\t\tif ( this.state.isOpen !== props.isOpen ) {\n\t\t\tthis.setState({\n\t\t\t\tisOpen: props.isOpen\n\t\t\t}, ::this.handleMenuToggle);\n\t\t}\n\t}\n\n\trender() {\n\n\t\tconst { control, onChange, autoClose, children, className, toggle, ...other } = this.props;\n\t\tconst { isOpen, maxHeight, placement } = this.state;\n\n\t\treturn (\n\t\t\t<div className={classNames('drop', className, {\n\t\t\t\tisOpen\n\t\t\t})}>\n\t\t\t\t{ cloneElement(control, {\n\t\t\t\t\tref: 'control',\n\t\t\t\t\tclassName: 'drop-control',\n\t\t\t\t\tonMouseDown: e=>{\n            this.setState({\n\t\t\t\t\t\t\tisOpen: toggle ? !isOpen : true\n\t\t\t\t\t\t}, ::this.handleMenuToggle);\n\t\t\t\t\t}\n\t\t\t\t}) }\n\t\t\t\t<div ref=\"container\" className={classNames('drop-container', placement)}>\n\t\t\t\t\t<Menu ref=\"menu\" className=\"drop-menu\" style={{maxHeight}} onChange={(e, value)=>{\n\t\t\t\t\t\t( isOpen && onChange ) && onChange(e, value);\n\t\t\t\t\t\tlet timeOut = null;\n\t\t\t\t\t\ttimeOut = setTimeout(() => {\n\t\t\t\t\t\t\tif ( isMounted(this) ) {\n\t\t\t\t\t\t\t\tautoClose && this.setState({isOpen: false});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tclearTimeout(timeOut);\n\t\t\t\t\t\t}, 250)\n\t\t\t\t\t}}>\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t</Menu>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\thandleMenuToggle(e) {\n\t\tconst { isOpen } = this.state;\n\t\treturn isOpen\n\t\t\t? this.handleMenuExpand(e)\n\t\t\t: this.handleMenuCollapse(e);\n\t}\n\n\thandleClickOutside(e) {\n\t\tconst { isOpen } = this.state;\n\t\tif ( isOpen && this.props.handleClickOutside ) {\n\t\t\tthis.setState({isOpen: !isOpen});\n\t\t}\n\t}\n\n\thandleMenuExpand(){\n\t\tthis.getHiddenMenuOffset();\n\t}\n\n\thandleMenuCollapse(){\n\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.control = findDOMNode(this.refs.control);\n\t\tthis.getHiddenMenuOffset();\n\t\twindow.addEventListener('resize', this.debounceFn);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('resize', this.debounceFn);\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tconst { isOpen } = this.props;\n\t\tif (isOpen !== prevProps.isOpen) {\n\t\t\tthis.handleMenuToggle();\n\t\t}\n\t}\n\n\tgetHiddenMenuOffset(){\n\t\tconst rect = this.control.getBoundingClientRect();\n\n\t\tconst cords = {\n\t\t\ttop: rect.top,\n\t\t\tleft: rect.left,\n\t\t\tbottom: document.documentElement.clientHeight - (rect.top),\n\t\t\tright: document.documentElement.clientWidth - (rect.left)\n\t\t};\n\n\t\tlet maxHeight = cords.bottom\n\t\t\t, maxWidth = cords.left\n\t\t\t, placement;\n\n\t\t// Decide if place the dropdown below or above the input\n\t\tif (maxHeight < findDOMNode(this.refs.menu).clientHeight + 20 && cords.top > cords.bottom) {\n\t\t\tmaxHeight = cords.top;\n\t\t\tplacement = \"top-\";\n\t\t} else {\n\t\t\tplacement = \"bottom-\";\n\t\t}\n\n\t\t// Decide if place the dropdown below or above the input\n\t\tif (maxWidth < findDOMNode(this.refs.menu).clientWidth + 20 && cords.left > cords.right) {\n\t\t\tplacement += \"left\";\n\t\t} else {\n\t\t\tplacement += \"right\";\n\t\t}\n\n\t\tthis.setState({rect, maxHeight, placement});\n\t}\n\n}\n\nexport default onClickOutside(DropDown, 'react-datepicker__tether-element')\nexport { Item }"]}