{"version":3,"sources":["components/Field/Field.js"],"names":["Field","input","refs","isDOMElement","canUseAccessors","getInputDOMNode","valueDescriptor","Object","defineProperty","configurable","enumerable","get","value","set","val","call","prefix","mask","i","length","isPermanentChar","state","maskChar","character","isAllowedChar","getPrefix","pos","split","some","getFilledLength","array","prefixLen","insertRawSubstr","slice","emptyValue","formatValue","concat","createFilledArray","map","join","start","len","end","filter","newSubstr","substr","isFilled","isPermanent","shift","replaceSubstr","allowMaskChar","ruleChar","charRule","charsRules","RegExp","test","permanents","indexOf","filledLen","getRightEditablePos","setCaretPos","selectionStart","selectionEnd","range","createTextRange","collapse","moveStart","moveEnd","select","document","selection","createRange","parentElement","getSelection","raf","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","fn","setTimeout","setPos","setSelection","bind","lastCaretPos","activeElement","lastEditablePos","str","forEach","push","hasValue","props","setState","nextProps","hasOwnProperty","required","disabled","haveValue","formatChars","defaultCharsRules","oldMask","parseMask","isMaskChanged","defaultMaskChar","newValue","getStringValue","showEmpty","alwaysShowMask","isFocused","isEmpty","prevProps","prevState","updateUncontrolledInput","getInputValue","setInputValue","event","hasHandler","onKeyDown","ctrlKey","metaKey","caretPos","getCaretPos","key","preventDefault","deleteFromRight","selectionRange","clearRange","editablePos","getLeftEditablePos","onChange","onKeyPress","isWindowsPhoneBrowser","maskLen","defaultValue","target","pasteSelection","preventEmptyChange","disableValueAccessors","oldValue","pasteText","valueLen","oldValueLen","clearedValue","substrLen","startPos","enteredSubstr","removedLen","clearOnly","isAndroidBrowser","isAndroidFirefox","enableValueAccessors","inputValue","isInputValueChanged","setCaretToEnd","onFocus","onBlur","type","parseFloat","toFixed","text","clipboardData","getData","textLen","getRawSubstrLength","windows","firefox","android","ua","navigator","userAgent","phone","element","HTMLElement","nodeType","nodeName","isValidValue","floating","placeholder","autoComplete","min","max","name","readOnly","large","small","block","success","warning","danger","className","other","valid","icon","inputProps","e","ref","maxLength","parseInt","onInput","toString","handlersKeys","fieldBlock","fieldLg","fieldMd","fieldSm","hidden","entry","getDOMNode","focus","undefined","propTypes","bool","oneOfType","string","any","number","PropTypes","defaultProps"],"mappings":"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","file":"Field.js","sourcesContent":["import React, {Component, PropTypes, createElement, cloneElement} from 'react'\nimport { findDOMNode } from 'react-dom'\nimport { classNames, inArray } from 'helpers'\n\nclass Field extends Component {\n\n\tdefaultCharsRules = {\n\t\t\"9\": \"[0-9]\",\n\t\t\"a\": \"[A-Za-z]\",\n\t\t\"А\": \"[A-ZА-Яa-zа-я]\",\n\t\t\"*\": \"[A-Za-z0-9]\"\n\t};\n\tdefaultMaskChar = \"_\";\n\tlastCaretPos = null;\n\n\tstatic isAndroidBrowser() {\n\t\tlet windows = new RegExp(\"windows\", \"i\");\n\t\tlet firefox = new RegExp(\"firefox\", \"i\");\n\t\tlet android = new RegExp(\"android\", \"i\");\n\t\tlet ua = navigator.userAgent;\n\t\treturn !windows.test(ua)\n\t\t\t&&\n\t\t\t!firefox.test(ua)\n\t\t\t&&\n\t\t\tandroid.test(ua);\n\t}\n\tstatic isWindowsPhoneBrowser() {\n\t\tlet windows = new RegExp(\"windows\", \"i\");\n\t\tlet phone = new RegExp(\"phone\", \"i\");\n\t\tlet ua = navigator.userAgent;\n\t\treturn windows.test(ua) && phone.test(ua);\n\t}\n\tstatic isAndroidFirefox() {\n\t\tlet windows = new RegExp(\"windows\", \"i\");\n\t\tlet firefox = new RegExp(\"firefox\", \"i\");\n\t\tlet android = new RegExp(\"android\", \"i\");\n\t\tlet ua = navigator.userAgent;\n\t\treturn !windows.test(ua)\n\t\t\t&&\n\t\t\tfirefox.test(ua)\n\t\t\t&&\n\t\t\tandroid.test(ua);\n\t}\n\n\tstatic isDOMElement(element) {\n\t\treturn typeof HTMLElement === \"object\"\n\t\t\t? element instanceof HTMLElement // DOM2\n\t\t\t: element.nodeType === 1 && typeof element.nodeName === \"string\";\n\t}\n\n\tgetInputDOMNode(){\n\t\tlet input = this.refs['entry'];\n\n\t\tif (!input) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// React 0.14\n\t\tif (Field.isDOMElement(input)) {\n\t\t\treturn input;\n\t\t}\n\n\t\treturn findDOMNode(input);\n\t}\n\n\tenableValueAccessors() {\n\t\tif (this.canUseAccessors) {\n\t\t\tlet input = this.getInputDOMNode();\n\t\t\tthis.valueDescriptor = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(input), 'value');\n\t\t\tObject.defineProperty(input, 'value', {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tget: () => this.value,\n\t\t\t\tset: (val) => {\n\t\t\t\t\tthis.value = val;\n\t\t\t\t\tthis.valueDescriptor.set.call(input, val);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\tdisableValueAccessors() {\n\t\tlet { valueDescriptor } = this;\n\t\tif (!valueDescriptor) {\n\t\t\treturn;\n\t\t}\n\t\tthis.valueDescriptor = null;\n\t\tlet input = this.getInputDOMNode();\n\t\tObject.defineProperty(input, 'value', valueDescriptor);\n\t}\n\tgetInputValue() {\n\t\tlet input = this.getInputDOMNode();\n\t\tlet { valueDescriptor } = this;\n\n\t\tlet value;\n\t\tif (valueDescriptor) {\n\t\t\tvalue = valueDescriptor.get.call(input);\n\t\t}\n\t\telse {\n\t\t\tvalue = input.value;\n\t\t}\n\n\t\treturn value;\n\t}\n\tsetInputValue(val) {\n\t\tlet input = this.getInputDOMNode();\n\t\tthis.value = val;\n\t\tinput.value = val;\n\t}\n\tgetPrefix() {\n\t\tlet prefix = \"\";\n\t\tlet { mask } = this;\n\t\tfor (let i = 0; i < mask.length && this.isPermanentChar(i); ++i) {\n\t\t\tprefix += mask[i];\n\t\t}\n\t\treturn prefix;\n\t}\n\tgetFilledLength(value = this.state.value) {\n\t\tlet i;\n\t\tlet { maskChar } = this;\n\n\t\tif (!maskChar) {\n\t\t\treturn value.length;\n\t\t}\n\n\t\tfor (i = value.length - 1; i >= 0; --i) {\n\t\t\tlet character = value[i];\n\t\t\tif (!this.isPermanentChar(i) && this.isAllowedChar(character, i)) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn ++i || this.getPrefix().length;\n\t}\n\tgetLeftEditablePos(pos) {\n\t\tfor (let i = pos; i >= 0; --i) {\n\t\t\tif (!this.isPermanentChar(i)) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\tgetRightEditablePos(pos) {\n\t\tlet { mask } = this;\n\t\tfor (let i = pos; i < mask.length; ++i) {\n\t\t\tif (!this.isPermanentChar(i)) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\tisEmpty(value = this.state.value) {\n\t\treturn !value.split(\"\").some((character, i) =>\n\t\t\t!this.isPermanentChar(i) && this.isAllowedChar(character, i)\n\t\t);\n\t}\n\tisFilled(value = this.state.value) {\n\t\treturn this.getFilledLength(value) === this.mask.length;\n\t}\n\tcreateFilledArray(length, val) {\n\t\tlet array = [];\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tarray[i] = val;\n\t\t}\n\t\treturn array;\n\t}\n\tformatValue(value) {\n\t\tlet { maskChar, mask } = this;\n\t\tif (!maskChar) {\n\t\t\tlet prefix = this.getPrefix();\n\t\t\tlet prefixLen = prefix.length;\n\t\t\tvalue = this.insertRawSubstr(\"\", value, 0);\n\t\t\twhile (value.length > prefixLen && this.isPermanentChar(value.length - 1)) {\n\t\t\t\tvalue = value.slice(0, value.length - 1);\n\t\t\t}\n\n\t\t\tif (value.length < prefixLen) {\n\t\t\t\tvalue = prefix;\n\t\t\t}\n\n\t\t\treturn value;\n\t\t}\n\t\tif (value) {\n\t\t\tlet emptyValue = this.formatValue(\"\");\n\t\t\treturn this.insertRawSubstr(emptyValue, value, 0);\n\t\t}\n\t\treturn value.split(\"\")\n\t\t.concat(this.createFilledArray(mask.length - value.length, null))\n\t\t.map((character, pos) => {\n\t\t\tif (this.isAllowedChar(character, pos)) {\n\t\t\t\treturn character;\n\t\t\t}\n\t\t\telse if (this.isPermanentChar(pos)) {\n\t\t\t\treturn mask[pos];\n\t\t\t}\n\t\t\treturn maskChar;\n\t\t})\n\t\t.join(\"\");\n\t}\n\tclearRange(value, start, len) {\n\t\tlet end = start + len;\n\t\tlet { maskChar, mask } = this;\n\t\tif (!maskChar) {\n\t\t\tlet prefixLen = this.getPrefix().length;\n\t\t\tvalue = value.split(\"\")\n\t\t\t.filter((character, i) => i < prefixLen || i < start || i >= end)\n\t\t\t.join(\"\");\n\t\t\treturn this.formatValue(value);\n\t\t}\n\t\treturn value.split(\"\")\n\t\t.map((character, i) => {\n\t\t\tif (i < start || i >= end) {\n\t\t\t\treturn character;\n\t\t\t}\n\t\t\tif (this.isPermanentChar(i)) {\n\t\t\t\treturn mask[i];\n\t\t\t}\n\t\t\treturn maskChar;\n\t\t})\n\t\t.join(\"\");\n\t}\n\treplaceSubstr(value, newSubstr, pos) {\n\t\treturn value.slice(0, pos) + newSubstr + value.slice(pos + newSubstr.length);\n\t}\n\tinsertRawSubstr(value, substr, pos) {\n\t\tlet { mask, maskChar } = this;\n\t\tlet isFilled = this.isFilled(value);\n\t\tlet prefixLen = this.getPrefix().length;\n\t\tsubstr = substr.split(\"\");\n\n\t\tif (!maskChar && pos > value.length) {\n\t\t\tvalue += mask.slice(value.length, pos);\n\t\t}\n\n\t\tfor (let i = pos; i < mask.length && substr.length; ) {\n\t\t\tlet isPermanent = this.isPermanentChar(i);\n\t\t\tif (!isPermanent || mask[i] === substr[0]) {\n\t\t\t\tlet character = substr.shift();\n\t\t\t\tif (this.isAllowedChar(character, i, true)) {\n\t\t\t\t\tif (i < value.length) {\n\t\t\t\t\t\tif (maskChar || isFilled || i < prefixLen) {\n\t\t\t\t\t\t\tvalue = this.replaceSubstr(value, character, i);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvalue = this.formatValue(value.substr(0, i) + character + value.substr(i));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (!maskChar) {\n\t\t\t\t\t\tvalue += character;\n\t\t\t\t\t}\n\t\t\t\t\t++i;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!maskChar && i >= value.length) {\n\t\t\t\t\tvalue += mask[i];\n\t\t\t\t}\n\t\t\t\telse if (maskChar && isPermanent && substr[0] === maskChar) {\n\t\t\t\t\tsubstr.shift();\n\t\t\t\t}\n\t\t\t\t++i;\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\tgetRawSubstrLength(value, substr, pos) {\n\t\tlet { mask, maskChar } = this;\n\t\tsubstr = substr.split(\"\");\n\t\tlet i = pos;\n\t\tfor (; i < mask.length && substr.length; ) {\n\t\t\tif (!this.isPermanentChar(i) || mask[i] === substr[0]) {\n\t\t\t\tlet character = substr.shift();\n\t\t\t\tif (this.isAllowedChar(character, i, true)) {\n\t\t\t\t\t++i;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t++i;\n\t\t\t}\n\t\t}\n\t\treturn i - pos;\n\t}\n\tisAllowedChar(character, pos, allowMaskChar = false) {\n\t\tlet { mask, maskChar } = this;\n\t\tif (this.isPermanentChar(pos)) {\n\t\t\treturn mask[pos] === character;\n\t\t}\n\t\tlet ruleChar = mask[pos];\n\t\tlet charRule = this.charsRules[ruleChar];\n\t\treturn (new RegExp(charRule)).test(character || \"\") || (allowMaskChar && character === maskChar);\n\t}\n\tisPermanentChar(pos) {\n\t\treturn this.permanents.indexOf(pos) !== -1;\n\t}\n\tsetCaretToEnd() {\n\t\tif ( !!(this.mask) ) {\n\t\t\tlet filledLen = this.getFilledLength();\n\t\t\tlet pos = this.getRightEditablePos(filledLen);\n\t\t\tif (pos !== null) {\n\t\t\t\tthis.setCaretPos(pos);\n\t\t\t}\n\t\t}\n\t}\n\tsetSelection(start, len = 0) {\n\t\tlet input = this.getInputDOMNode();\n\t\tif (!input) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet end = start + len;\n\t\tif (\"selectionStart\" in input && \"selectionEnd\" in input) {\n\t\t\tinput.selectionStart = start;\n\t\t\tinput.selectionEnd = end;\n\t\t}\n\t\telse {\n\t\t\tlet range = input.createTextRange();\n\t\t\trange.collapse(true);\n\t\t\trange.moveStart(\"character\", start);\n\t\t\trange.moveEnd(\"character\", end - start);\n\t\t\trange.select();\n\t\t}\n\t}\n\tgetSelection() {\n\t\tlet input = this.getInputDOMNode();\n\t\tlet start = 0;\n\t\tlet end = 0;\n\n\t\tif (\"selectionStart\" in input && \"selectionEnd\" in input) {\n\t\t\tstart = input.selectionStart;\n\t\t\tend = input.selectionEnd;\n\t\t}\n\t\telse {\n\t\t\tlet range = document.selection.createRange();\n\t\t\tif (range.parentElement() === input) {\n\t\t\t\tstart = -range.moveStart(\"character\", -input.value.length);\n\t\t\t\tend = -range.moveEnd(\"character\", -input.value.length);\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tstart: start,\n\t\t\tend: end,\n\t\t\tlength: end - start\n\t\t};\n\t}\n\tgetCaretPos() {\n\t\treturn this.getSelection().start;\n\t}\n\tsetCaretPos(pos) {\n\t\tlet raf = window.requestAnimationFrame\n\t\t\t||\n\t\t\twindow.webkitRequestAnimationFrame\n\t\t\t||\n\t\t\twindow.mozRequestAnimationFrame\n\t\t\t||\n\t\t\t((fn) => setTimeout(fn, 0));\n\n\t\tlet setPos = this.setSelection.bind(this, pos, 0);\n\n\t\tsetPos();\n\t\traf(setPos);\n\n\t\tthis.lastCaretPos = pos;\n\t}\n\tisFocused() {\n\t\treturn document.activeElement === this.getInputDOMNode();\n\t}\n\tparseMask(mask) {\n\t\tif (!mask || typeof mask !== \"string\") {\n\t\t\treturn {\n\t\t\t\tmask: null,\n\t\t\t\tlastEditablePos: null,\n\t\t\t\tpermanents: []\n\t\t\t};\n\t\t}\n\t\tlet str = \"\";\n\t\tlet permanents = [];\n\t\tlet isPermanent = false;\n\t\tlet lastEditablePos = null;\n\n\t\tmask.split(\"\").forEach((character) => {\n\t\t\tif (!isPermanent && character === \"\\\\\") {\n\t\t\t\tisPermanent = true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (isPermanent || !this.charsRules[character]) {\n\t\t\t\t\tpermanents.push(str.length);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlastEditablePos = str.length + 1;\n\t\t\t\t}\n\t\t\t\tstr += character;\n\t\t\t\tisPermanent = false;\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tmask: str,\n\t\t\tlastEditablePos: lastEditablePos,\n\t\t\tpermanents: permanents\n\t\t};\n\t}\n\tgetStringValue(value) {\n\t\treturn !value && value !== 0 ? \"\" : value + \"\";\n\t}\n\tcomponentWillMount() {\n\t\tthis.hasValue(this.props);\n\t\tlet { mask } = this;\n\t\tlet { value } = this.state;\n\t\tif (mask && value) {\n\t\t\tthis.setState({ value });\n\t\t}\n\t}\n\tcomponentWillReceiveProps(nextProps) {\n\n\t\tif ( nextProps.hasOwnProperty('value') ) {\n\t\t\tthis.hasValue(nextProps);\n\t\t}\n\t\tconst { required, disabled } = this.props;\n\t\trequired !== nextProps.required && this.setState({required: nextProps.required});\n\t\tdisabled !== nextProps.disabled && this.setState({disabled: nextProps.disabled});\n\n\t\tthis.haveValue = this.props.value != null;\n\t\tthis.charsRules = \"formatChars\" in nextProps ? nextProps.formatChars : this.defaultCharsRules;\n\n\t\tlet oldMask = this.mask;\n\t\tlet mask = this.parseMask(nextProps.mask);\n\t\tlet isMaskChanged = mask.mask && mask.mask !== this.mask;\n\n\t\tthis.mask = mask.mask;\n\t\tthis.permanents = mask.permanents;\n\t\tthis.lastEditablePos = mask.lastEditablePos;\n\t\tthis.maskChar = \"maskChar\" in nextProps ? nextProps.maskChar : this.defaultMaskChar;\n\n\t\tif (!this.mask) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet newValue = nextProps.value != null\n\t\t\t? this.getStringValue(nextProps.value)\n\t\t\t: this.state.value;\n\n\t\tif (!oldMask && nextProps.value == null) {\n\t\t\tnewValue = this.getInputDOMNode().value;\n\t\t}\n\n\t\tlet showEmpty = nextProps.alwaysShowMask || this.isFocused();\n\t\tif (isMaskChanged || (mask.mask && (newValue || (showEmpty && !this.haveValue)))) {\n\t\t\tnewValue = this.formatValue(newValue);\n\n\t\t\tif (isMaskChanged) {\n\t\t\t\tlet pos = this.lastCaretPos;\n\t\t\t\tlet filledLen = this.getFilledLength(newValue);\n\t\t\t\tif (filledLen < pos) {\n\t\t\t\t\tthis.setCaretPos(this.getRightEditablePos(filledLen));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (mask.mask && this.isEmpty(newValue) && !showEmpty && !this.haveValue) {\n\t\t\tnewValue = \"\";\n\t\t}\n\t\tthis.value = newValue;\n\t\tif (this.state.value !== newValue) {\n\t\t\tthis.setState({ value: newValue });\n\t\t}\n\t}\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tif ((this.mask || prevProps.mask) && this.props.value == null) {\n\t\t\tthis.updateUncontrolledInput();\n\t\t}\n\t\tif (this.valueDescriptor && this.getInputValue() !== this.state.value) {\n\t\t\tthis.setInputValue(this.state.value);\n\t\t}\n\t}\n\tupdateUncontrolledInput() {\n\t\tif (this.getInputValue() !== this.state.value) {\n\t\t\tthis.setInputValue(this.state.value);\n\t\t}\n\t}\n\tonKeyDown(event) {\n\t\tlet hasHandler = typeof this.props.onKeyDown === \"function\";\n\t\tif (event.ctrlKey || event.metaKey) {\n\t\t\tif (hasHandler) {\n\t\t\t\tthis.props.onKeyDown(event);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tlet caretPos = this.getCaretPos();\n\t\tlet value = this.state.value;\n\t\tlet key = event.key;\n\t\tlet preventDefault = false;\n\t\tswitch (key) {\n\t\t\tcase \"Backspace\":\n\t\t\tcase \"Delete\":\n\t\t\t\tlet prefixLen = this.getPrefix().length;\n\t\t\t\tlet deleteFromRight = key === \"Delete\";\n\t\t\t\tlet selectionRange = this.getSelection();\n\t\t\t\tif (selectionRange.length) {\n\t\t\t\t\tvalue = this.clearRange(value, selectionRange.start, selectionRange.length);\n\t\t\t\t}\n\t\t\t\telse if (caretPos < prefixLen || (!deleteFromRight && caretPos === prefixLen)) {\n\t\t\t\t\tcaretPos = prefixLen;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlet editablePos = deleteFromRight ? this.getRightEditablePos(caretPos) : this.getLeftEditablePos(caretPos - 1);\n\t\t\t\t\tif (editablePos !== null) {\n\t\t\t\t\t\tvalue = this.clearRange(value, editablePos, 1);\n\t\t\t\t\t\tcaretPos = editablePos;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpreventDefault = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (hasHandler) {\n\t\t\tthis.props.onKeyDown(event);\n\t\t}\n\n\t\tif (value !== this.state.value) {\n\t\t\tthis.setInputValue(value);\n\t\t\tthis.setState({\n\t\t\t\tvalue: this.haveValue ? this.state.value : value\n\t\t\t});\n\t\t\tpreventDefault = true;\n\t\t\tif (typeof this.props.onChange === \"function\") {\n\t\t\t\tthis.props.onChange(event);\n\t\t\t}\n\t\t}\n\t\tif (preventDefault) {\n\t\t\tevent.preventDefault();\n\t\t\tthis.setCaretPos(caretPos);\n\t\t}\n\t}\n\tonKeyPress(event) {\n\t\tlet key = event.key;\n\t\tlet hasHandler = typeof this.props.onKeyPress === \"function\";\n\t\tif (key === \"Enter\" || event.ctrlKey || event.metaKey) {\n\t\t\tif (hasHandler) {\n\t\t\t\tthis.props.onKeyPress(event);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isWindowsPhoneBrowser) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet caretPos = this.getCaretPos();\n\t\tlet selection = this.getSelection();\n\t\tlet { value } = this.state;\n\t\tlet { mask, maskChar, lastEditablePos } = this;\n\t\tlet maskLen = mask.length;\n\t\tlet prefixLen = this.getPrefix().length;\n\n\t\tif (this.isPermanentChar(caretPos) && mask[caretPos] === key) {\n\t\t\tvalue = this.insertRawSubstr(value, key, caretPos);\n\t\t\t++caretPos;\n\t\t}\n\t\telse {\n\t\t\tlet editablePos = this.getRightEditablePos(caretPos);\n\t\t\tif (editablePos !== null && this.isAllowedChar(key, editablePos)) {\n\t\t\t\tvalue = this.clearRange(value, selection.start, selection.length);\n\t\t\t\tvalue = this.insertRawSubstr(value, key, editablePos);\n\t\t\t\tcaretPos = editablePos + 1;\n\t\t\t}\n\t\t}\n\n\t\tif (value !== this.state.value) {\n\t\t\tthis.setInputValue(value);\n\t\t\tthis.setState({\n\t\t\t\tvalue: this.haveValue ? this.state.value : value\n\t\t\t});\n\t\t\tif (typeof this.props.onChange === \"function\") {\n\t\t\t\tthis.props.onChange(event);\n\t\t\t}\n\t\t}\n\t\tevent.preventDefault();\n\t\tif (caretPos < lastEditablePos && caretPos > prefixLen) {\n\t\t\tcaretPos = this.getRightEditablePos(caretPos);\n\t\t}\n\t\tthis.setCaretPos(caretPos);\n\n\t\tconst {defaultValue} = this.props;\n\t\tthis.hasValue({defaultValue, value: event.target.value});\n\t}\n\tonChange(event) {\n\t\tconst {defaultValue} = this.props;\n\t\tthis.hasValue({defaultValue, value: event.target.value});\n\n\t\tlet { pasteSelection, mask, maskChar, lastEditablePos, preventEmptyChange } = this;\n\t\tlet target = event.target;\n\t\tlet value = this.getInputValue();\n\t\tif (!value && this.preventEmptyChange) {\n\t\t\tthis.disableValueAccessors();\n\t\t\tthis.preventEmptyChange = false;\n\t\t\tthis.setInputValue(this.state.value);\n\t\t\treturn;\n\t\t}\n\t\tlet oldValue = this.state.value;\n\t\tif (pasteSelection) {\n\t\t\tthis.pasteSelection = null;\n\t\t\tthis.pasteText(oldValue, value, pasteSelection, event);\n\t\t\treturn;\n\t\t}\n\t\tlet selection = this.getSelection();\n\t\tlet caretPos = selection.end;\n\t\tlet maskLen = mask.length;\n\t\tlet valueLen = value.length;\n\t\tlet oldValueLen = oldValue.length;\n\t\tlet prefixLen = this.getPrefix().length;\n\t\tlet clearedValue;\n\n\t\tif (valueLen > oldValueLen) {\n\t\t\tlet substrLen = valueLen - oldValueLen;\n\t\t\tlet startPos = selection.end - substrLen;\n\t\t\tlet enteredSubstr = value.substr(startPos, substrLen);\n\n\t\t\tif (startPos < lastEditablePos && (substrLen !== 1 || enteredSubstr !== mask[startPos])) {\n\t\t\t\tcaretPos = this.getRightEditablePos(startPos);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcaretPos = startPos;\n\t\t\t}\n\n\t\t\tvalue = value.substr(0, startPos) + value.substr(startPos + substrLen);\n\n\t\t\tclearedValue = this.clearRange(value, startPos, maskLen - startPos);\n\t\t\tclearedValue = this.insertRawSubstr(clearedValue, enteredSubstr, caretPos);\n\n\t\t\tvalue = this.insertRawSubstr(oldValue, enteredSubstr, caretPos);\n\n\t\t\tif (substrLen !== 1 || (caretPos >= prefixLen && caretPos < lastEditablePos)) {\n\t\t\t\tcaretPos = this.getFilledLength(clearedValue);\n\t\t\t}\n\t\t\telse if (caretPos < lastEditablePos) {\n\t\t\t\tcaretPos++;\n\t\t\t}\n\t\t}\n\t\telse if (valueLen < oldValueLen) {\n\t\t\tlet removedLen = maskLen - valueLen;\n\t\t\tclearedValue = this.clearRange(oldValue, selection.end, removedLen);\n\t\t\tlet substr = value.substr(0, selection.end);\n\t\t\tlet clearOnly = substr === oldValue.substr(0, selection.end);\n\n\t\t\tif (maskChar) {\n\t\t\t\tvalue = this.insertRawSubstr(clearedValue, substr, 0);\n\t\t\t}\n\n\t\t\tclearedValue = this.clearRange(clearedValue, selection.end, maskLen - selection.end);\n\t\t\tclearedValue = this.insertRawSubstr(clearedValue, substr, 0);\n\n\t\t\tif (!clearOnly) {\n\t\t\t\tcaretPos = this.getFilledLength(clearedValue);\n\t\t\t}\n\t\t\telse if (caretPos < prefixLen) {\n\t\t\t\tcaretPos = prefixLen;\n\t\t\t}\n\t\t}\n\t\tvalue = this.formatValue(value);\n\n\t\t// prevent android autocomplete insertion on backspace\n\t\t// prevent hanging after first entered character on Windows 10 Mobile\n\t\tif (!this.canUseAccessors || (!this.isAndroidBrowser && !this.isWindowsPhoneBrowser)) {\n\t\t\tthis.setInputValue(value);\n\t\t}\n\n\t\tif (this.canUseAccessors && ((this.isAndroidFirefox && value && !this.getInputValue()) || this.isAndroidBrowser || this.isWindowsPhoneBrowser)) {\n\t\t\tthis.value = value;\n\t\t\tthis.enableValueAccessors();\n\t\t\tif (this.isAndroidFirefox) {\n\t\t\t\tthis.preventEmptyChange = true;\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.preventEmptyChange = false;\n\t\t\t\tthis.disableValueAccessors();\n\t\t\t}, 0);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tvalue: this.haveValue ? this.state.value : value\n\t\t});\n\n\t\tif (typeof this.props.onChange === \"function\") {\n\t\t\tthis.props.onChange(event);\n\t\t}\n\n\t\tthis.setCaretPos(caretPos);\n\t}\n\tonFocus(event) {\n\t\tthis.setState({isFocused: true});\n\t\tif (!this.state.value) {\n\t\t\tlet prefix = this.getPrefix();\n\t\t\tlet value = this.formatValue(prefix);\n\t\t\tlet inputValue = this.formatValue(value);\n\n\t\t\t// do not use this.getInputValue and this.setInputValue as this.refs.input\n\t\t\t// can be undefined at this moment if autoFocus attribute is set\n\t\t\tlet isInputValueChanged = inputValue !== event.target.value;\n\n\t\t\tif (isInputValueChanged) {\n\t\t\t\tevent.target.value = inputValue;\n\t\t\t}\n\n\t\t\tthis.setState({\n\t\t\t\tvalue: this.haveValue ? this.state.value : inputValue\n\t\t\t}, this.setCaretToEnd);\n\n\t\t\tif (isInputValueChanged && typeof this.props.onChange === \"function\") {\n\t\t\t\tthis.props.onChange(event);\n\t\t\t}\n\t\t}\n\t\telse if (this.getFilledLength() < this.mask.length) {\n\t\t\tthis.setCaretToEnd();\n\t\t}\n\n\t\tif (typeof this.props.onFocus === \"function\") {\n\t\t\tthis.props.onFocus(event);\n\t\t}\n\t}\n\tonBlur(event) {\n\t\tthis.setState({isFocused: false});\n\t\tif (!this.props.alwaysShowMask && this.isEmpty(this.state.value)) {\n\t\t\tlet inputValue = \"\";\n\t\t\tlet isInputValueChanged = inputValue !== this.getInputValue();\n\t\t\tif (isInputValueChanged) {\n\t\t\t\tthis.setInputValue(inputValue);\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tvalue: this.haveValue ? this.state.value : \"\"\n\t\t\t});\n\t\t\tif (isInputValueChanged && typeof this.props.onChange === \"function\") {\n\t\t\t\tthis.props.onChange(event);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof this.props.onBlur === \"function\") {\n\t\t\tthis.props.onBlur(event);\n\t\t}\n\n\t\tlet { value } = event.target;\n\t\tconst {defaultValue, type} = this.props;\n\t\tif (type === 'number') {\n\t\t\tvalue = parseFloat(value).toFixed(2);\n\t\t}\n\n\t\tthis.hasValue({defaultValue, value});\n\t}\n\tonPaste(event) {\n\t\tif (this.isAndroidBrowser) {\n\t\t\tthis.pasteSelection = this.getSelection();\n\t\t\tthis.setInputValue(\"\");\n\t\t\treturn;\n\t\t}\n\t\tlet text;\n\t\tif (window.clipboardData && window.clipboardData.getData) { // IE\n\t\t\ttext = window.clipboardData.getData(\"Text\");\n\t\t}\n\t\telse if (event.clipboardData && event.clipboardData.getData) {\n\t\t\ttext = event.clipboardData.getData(\"text/plain\");\n\t\t}\n\t\tif (text) {\n\t\t\tlet value = this.state.value;\n\t\t\tlet selection = this.getSelection();\n\t\t\tthis.pasteText(value, text, selection, event);\n\t\t}\n\t\tevent.preventDefault();\n\t}\n\tpasteText(value, text, selection, event) {\n\t\tlet caretPos = selection.start;\n\t\tif (selection.length) {\n\t\t\tvalue = this.clearRange(value, caretPos, selection.length);\n\t\t}\n\t\tlet textLen = this.getRawSubstrLength(value, text, caretPos);\n\t\tvalue = this.insertRawSubstr(value, text, caretPos);\n\t\tcaretPos += textLen;\n\t\tcaretPos = this.getRightEditablePos(caretPos) || caretPos;\n\t\tif (value !== this.getInputValue()) {\n\t\t\tif (event) {\n\t\t\t\tthis.setInputValue(value);\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tvalue: this.haveValue ? this.state.value : value\n\t\t\t});\n\t\t\tif (event && typeof this.props.onChange === \"function\") {\n\t\t\t\tthis.props.onChange(event);\n\t\t\t}\n\t\t}\n\t\tthis.setCaretPos(caretPos);\n\t}\n\tcomponentDidMount() {\n\t\tthis.isAndroidBrowser = Field.isAndroidBrowser();\n\t\tthis.isWindowsPhoneBrowser = Field.isWindowsPhoneBrowser();\n\t\tthis.isAndroidFirefox = Field.isAndroidFirefox();\n\n\t\tif (Object.getOwnPropertyDescriptor && Object.getPrototypeOf && Object.defineProperty) {\n\t\t\tlet input = this.getInputDOMNode();\n\t\t\tlet valueDescriptor = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(input), 'value');\n\t\t\tthis.canUseAccessors = !!(valueDescriptor && valueDescriptor.get && valueDescriptor.set);\n\t\t}\n\n\t\tif (this.mask && this.props.value == null) {\n\t\t\tthis.updateUncontrolledInput();\n\t\t}\n\t}\n\n\tstatic propTypes = {\n\t\tfloating: PropTypes.bool,\n\n\t\tplaceholder: PropTypes.oneOfType([\n\t\t\tPropTypes.string, PropTypes.bool\n\t\t]),\n\t\tautoComplete: PropTypes.oneOfType([\n\t\t\tPropTypes.string, PropTypes.bool\n\t\t]),\n\t\tvalue: PropTypes.any,\n\t\tdefaultValue: PropTypes.any,\n\t\ttype: PropTypes.string,\n\t\tmin: PropTypes.oneOfType([\n\t\t\tPropTypes.string, PropTypes.number\n\t\t]),\n\t\tmax: PropTypes.oneOfType([\n\t\t\tPropTypes.string, PropTypes.number\n\t\t]),\n\t\tname: PropTypes.oneOfType([\n\t\t\tPropTypes.string, PropTypes.bool\n\t\t]),\n\n\t\tlarge: PropTypes.bool,\n\t\tsmall: PropTypes.bool,\n\n\t\tblock: PropTypes.bool,\n\n\t\trequired: PropTypes.bool,\n\t\treadOnly: PropTypes.bool,\n\t\tdisabled: PropTypes.bool,\n\n\t\tsuccess: PropTypes.oneOfType([\n\t\t\tPropTypes.string, PropTypes.bool\n\t\t]),\n\t\twarning: PropTypes.oneOfType([\n\t\t\tPropTypes.string, PropTypes.bool\n\t\t]),\n\t\tdanger: React.PropTypes.oneOfType([\n\t\t\tPropTypes.string, PropTypes.bool\n\t\t])\n\t};\n\n\tstatic defaultProps = {\n\t\tmask: '',\n\t\tfloating: true,\n\n\t\tplaceholder: false,\n\t\tautoComplete: false,\n\t\t// value: '',\n\t\t// defaultValue: '',\n\t\ttype: 'text',\n\t\t//name: false,\n\n\t\tlarge: false,\n\t\tsmall: false,\n\n\t\tblock: false,\n\n\t\trequired: false,\n\t\treadOnly: false,\n\t\tdisabled: false,\n\n\t\tsuccess: false,\n\t\twarning: false,\n\t\tdanger: false\n\t};\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.haveValue = this.props.value != null;\n\t\tthis.charsRules = \"formatChars\" in this.props ? this.props.formatChars : this.defaultCharsRules;\n\n\t\tlet mask = this.parseMask(this.props.mask);\n\t\tlet defaultValue = this.props.defaultValue != null\n\t\t\t? this.props.defaultValue\n\t\t\t: '';\n\t\tlet value = this.props.value != null\n\t\t\t? this.props.value\n\t\t\t: defaultValue;\n\n\t\tvalue = this.getStringValue(value);\n\n\t\tthis.mask = mask.mask;\n\t\tthis.permanents = mask.permanents;\n\t\tthis.lastEditablePos = mask.lastEditablePos;\n\t\tthis.maskChar = \"maskChar\" in this.props ? this.props.maskChar : this.defaultMaskChar;\n\n\t\tif (this.mask && (this.props.alwaysShowMask || value)) {\n\t\t\tvalue = this.formatValue(value);\n\t\t}\n\n\t\tthis.state = {\n\t\t\thasValue: false,\n\t\t\tisFocused: false,\n\t\t\tvalue\n\t\t};\n\t}\n\n\t/*componentWillReceiveProps(props) {\n\t\tif ( props.hasOwnProperty('value') ) {\n\t\t\tthis.hasValue(props);\n\t\t}\n\t\tconst { required, disabled } = this.props;\n\t\trequired !== props.required && this.setState({required: props.required});\n\t\tdisabled !== props.disabled && this.setState({disabled: props.disabled});\n\t}*/\n\n\t/**\n\t * Check isValid oneOf([value, defaultValue])\n\t * @param props\n\t * value = value || defaultValue\n\t * setState({value});\n\t */\n\thasValue(props){\n\t\tconst {value, defaultValue} = props;\n\t\tconst hasValue = Field.isValidValue(value)\n\t\t\t? value\n\t\t\t: Field.isValidValue(defaultValue)\n\t\t\t\t? defaultValue\n\t\t\t\t: '';\n\n\t\tthis.setState({\n\t\t\tvalue: hasValue,\n\t\t\thasValue: !!(typeof hasValue === 'number' ? JSON.stringify(hasValue) : hasValue)\n\t\t});\n\t\treturn hasValue;\n\t}\n\n\t/**\n\t * Check if a value is valid to be displayed inside an input.\n\t *\n\t * @param value\n\t * @returns boolean if the string provided is valid, false otherwise.\n\t */\n\tstatic isValidValue(value){\n\t\treturn value !== '' && value !== undefined && value !== null;\n\t}\n\n\trender(){\n\t\tconst {\n\t\t\t/**\n\t\t\t * defaultValue for disable conflict value && defaultValue\n\t\t\t * and value can be null\n\t\t\t * see hasValue function\n\t\t\t */\n\t\t\tdefaultValue,\n\t\t\tfloating, placeholder, autoComplete, type, min, max,\n\t\t\tonChange, onFocus, onBlur,\n\t\t\tname, required, readOnly, disabled,\n\t\t\tlarge, small, block,\n\t\t\tsuccess,\twarning,\tdanger,\n\t\t\tclassName,\n\t\t\t...other\n\t\t} = this.props;\n\n\t\tconst valid = success || warning || danger;\n\n\t\tlet icon = null;\n\t\tconst { value, hasValue, isFocused } = this.state;\n\n\t\tconst inputProps = {\n\t\t\t...other, defaultValue,\n\t\t\tonChange: e=>{\n\t\t\t\tconst { value } = e.target;\n\t\t\t\tthis.hasValue({defaultValue, value});\n\t\t\t\tonChange && onChange(e);\n\t\t\t},\n\t\t\tonFocus: e=>{\n\t\t\t\tthis.setState({isFocused: true}, ::this.setCaretToEnd);\n\t\t\t\tonFocus && onFocus(e);\n\t\t\t},\n\t\t\tonBlur: e=>{\n\t\t\t\tthis.setState({isFocused: false});\n\t\t\t\tlet { value } = e.target;\n\t\t\t\t/*if (type === 'number') {\n\t\t\t\t\tvalue = !!(value) ? parseFloat(value).toFixed(2) : value;\n\t\t\t\t\tconsole.log(value)\n\t\t\t\t}*/\n\t\t\t\tthis.hasValue({defaultValue, value});\n\t\t\t\tonBlur && onBlur(e);\n\t\t\t},\n\t\t\tname, readOnly, autoComplete,\n\t\t\tref: 'entry',\n\t\t\tclassName: 'field-entry',\n\t\t\trequired, disabled, //value,\n\t\t\tmin, max\n\t\t};\n\n\t\tswitch (true) {\n\t\t\tcase type === 'number':\n\t\t\t\t/*inputProps.onKeyDown = (e)=>{\n\t\t\t\t\tconsole.log(e.keyCode)\n\t\t\t\t\t// Allow: backspace, delete, tab, escape, enter and . and ,\n\t\t\t\t\tlet ctrlKey = (e.ctrlKey || e.metaKey) === true;\n\t\t\t\t\tif (inArray(e.keyCode, [46, 8, 9, 27, 13, 110/!*, 190*!/, 188]) !== -1 ||\n\t\t\t\t\t\t// Allow: Ctrl+A\n\t\t\t\t\t\t(e.keyCode == 65 && ctrlKey) ||\n\t\t\t\t\t\t// Allow: Ctrl+C\n\t\t\t\t\t\t(e.keyCode == 67 && ctrlKey) ||\n\t\t\t\t\t\t// Allow: Ctrl+X\n\t\t\t\t\t\t(e.keyCode == 88 && ctrlKey) ||\n\t\t\t\t\t\t// Allow: Ctrl+V\n\t\t\t\t\t\t(e.keyCode == 86 && ctrlKey) ||\n\t\t\t\t\t\t// Allow: home, end, left, right\n\t\t\t\t\t\t(e.keyCode >= 35 && e.keyCode <= 39)) {\n\t\t\t\t\t\t// let it happen, don't do anything\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// Ensure that it is a number and stop the keypress\n\t\t\t\t\tif ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}*/\n\t\t}\n\n\t\tif ( !!(max) ) {\n\t\t\tconst maxLength = parseInt(max);\n\t\t\tinputProps.onInput = (e)=>{\n\t\t\t\tlet { value } = e.target;\n\t\t\t\tif ( value.toString().length > maxLength ) {\n\t\t\t\t\tvalue = value.slice(0, maxLength);\n\t\t\t\t\te.target.value = value;\n\t\t\t\t\tthis.hasValue({\n\t\t\t\t\t\tdefaultValue, value\n\t\t\t\t\t});\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/*inputProps.onChange = (e)=>{\n\t\t\tthis.setState({\n\t\t\t\tvalue: e.target.value\n\t\t\t})\n\t\t};*/\n\n\t\tlet { mask, alwaysShowMask, maskChar, formatChars, ...props } = this.props;\n\t\tif (this.mask) {\n\t\t\tlet handlersKeys = [\"onFocus\", \"onBlur\", \"onChange\", \"onKeyDown\", \"onKeyPress\", \"onPaste\"];\n\t\t\thandlersKeys.forEach((key) => {\n\t\t\t\tinputProps[key] = ::this[key];\n\t\t\t});\n\n\t\t\tif (props.value != null) {\n\t\t\t\tinputProps.value = this.state.value;\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<label className={classNames('field', {\n\t\t\t\tfloating: floating,\n\t\t\t\tisFocused: isFocused && !readOnly && !disabled,\n\t\t\t\thasValue: hasValue,\n\t\t\t\tfieldBlock: block,\n\t\t\t\tfieldLg: large,\n\t\t\t\tfieldMd: !(large || small),\n\t\t\t\tfieldSm: small,\n\t\t\t\tsuccess: success !== false,\n\t\t\t\twarning: warning !== false,\n\t\t\t\tdanger: danger !== false,\n\t\t\t\thidden: type === 'hidden',\n\t\t\t\trequired, disabled,\n\t\t\t}, className)}>\n\t\t\t\t<div className=\"field-control\">\n\t\t\t\t\t{\n\t\t\t\t\t\ttype !== 'textarea'\n\t\t\t\t\t\t\t? <input type={type} {...inputProps} />\n\t\t\t\t\t\t\t: <textarea {...inputProps} />\n\t\t\t\t\t}\n\t\t\t\t\t{ placeholder && (\n\t\t\t\t\t\t<span className=\"field-label\"\n\t\t\t\t\t\t      onClick={()=>this.refs.entry.getDOMNode().focus()}\n\t\t\t\t\t\t>{ placeholder } { required && <sup>*</sup> }</span>\n\t\t\t\t\t) }\n\t\t\t\t\t<hr className=\"field-border field-border-focus\"/>\n\t\t\t\t<hr className=\"field-border\"/>\n\t\t\t\t</div>\n\t\t\t\t{ typeof ( valid ) === 'string' && createElement('span', {\n\t\t\t\t\tclassName: 'field-valid'\n\t\t\t\t}, [icon, <span key=\"message\">{ valid }</span>] ) }\n\t\t\t</label>\n\t\t);\n\t}\n}\n\nexport default Field;"]}