{"version":3,"sources":["components/Ripple.js"],"names":["Ripple","props","state","key","waves","size","min","max","offset","_ignoreNextMouseDown","ripple","refs","setState","container","isCenter","disabled","onMouseDown","onMouseUp","onMouseLeave","children","other","eventHandlers","e","button","start","end","rippleProps","grandchildren","wave","style","_getRippleStyle","push","top","right","bottom","left","margin","length","shift","el","elHeight","offsetHeight","elWidth","offsetWidth","isTouchEvent","touches","pageX","pageY","pointerX","pointerY","topLeftDiag","_calcDiag","topRightDiag","botRightDiag","botLeftDiag","rippleRadius","Math","rippleSize","height","width","a","b","sqrt","propTypes","oneOfType","string","element","bool","func","defaultProps","Wave","callback","_initializeAnimation","_animate","findDOMNode","opacity","timeOut","setTimeout","window","clearTimeout","transitionValue","easeOut","set","object","isRequired"],"mappings":"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","file":"Ripple.js","sourcesContent":["import React, {\n\tComponent, PropTypes,\n\tcloneElement, createElement, isValidElement\n} from 'react'\nimport ReactDOM, { findDOMNode } from 'react-dom'\nimport ReactCSSTransitionGroup from 'react-addons-transition-group';\nimport PureRenderMixin  from 'react-addons-pure-render-mixin';\nimport Offset from 'util/offset.js';\nimport AutoPrefix from 'style/auto-prefix.js';\nimport Transitions from 'style/transitions.js';\nimport { isMounted } from 'helpers/index'\n\nclass Ripple extends Component {\n\tstatic propTypes = {\n\t\tcontainer: PropTypes.oneOfType([\n\t\t\tPropTypes.string,\n\t\t\tPropTypes.element,\n\t\t]),\n\t\tisCenter: PropTypes.bool,\n\t\tdisabled: PropTypes.bool,\n\t\tonMouseDown: PropTypes.oneOfType([\n\t\t\tPropTypes.bool, PropTypes.func\n\t\t]),\n\t\tonMouseUp: PropTypes.oneOfType([\n\t\t\tPropTypes.bool, PropTypes.func\n\t\t]),\n\t\tonMouseLeave: PropTypes.oneOfType([\n\t\t\tPropTypes.bool, PropTypes.func\n\t\t])\n\t};\n\n\tstatic defaultProps = {\n\t\tcontainer: 'div',\n\t\tisCenter: false,\n\t\tdisabled: false,\n\t\tonMouseDown: false,\n\t\tonMouseUp: false,\n\t\tonMouseLeave: false\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t//this.shouldComponentUpdate = ::PureRenderMixin.shouldComponentUpdate;\n\t\tthis.state = {\n\t\t\tkey: 0,\n\t\t\twaves: [],\n\t\t\tsize: {\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 0\n\t\t\t},\n\t\t\toffset: {}\n\t\t};\n\t\tthis._ignoreNextMouseDown = false;\n\t\tthis.ripple = null;\n\t}\n\n\tcomponentDidMount() {\n    this.ripple = findDOMNode(this.refs.ripple);\n\t\tthis.setState({\n\t\t\tsize: this.size\n\t\t})\n\t}\n\n\tget size(){\n\t\tlet ripple = this.ripple;\n\t\treturn !this.ripple ? {\n\t\t\tmin: 0,\n\t\t\tmax: 0\n\t\t} : {\n      min: Math.min(\n        ripple.offsetWidth,\n        ripple.offsetHeight\n      ),\n      max: Math.max(\n        ripple.offsetWidth,\n        ripple.offsetHeight\n      )\n    }\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tcontainer, isCenter, disabled,\n\t\t\tonMouseDown, onMouseUp, onMouseLeave,\n\t\t\tchildren, ...other\n\t\t} = this.props;\n\n\t\tconst eventHandlers = {\n\t\t\tonMouseDown: (e)=>{\n\t\t\t\tif (e.button === 0 && !this._ignoreNextMouseDown) {\n          ::this.start(e);\n\t\t\t\t\tonMouseDown && onMouseDown(e);\n\t\t\t\t\tthis._ignoreNextMouseDown = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t, onMouseUp: (e)=>{\n\t\t\t\t::this.end(e);\n\t\t\t\tonMouseUp && onMouseUp(e);\n\t\t\t}\n\t\t\t, onMouseLeave: (e)=>{\n\t\t\t\t::this.end(e);\n\t\t\t\tonMouseLeave && onMouseLeave(e);\n\t\t\t}\n\t\t};\n\n\t\tconst rippleProps = {\n\t\t\t...other,\n\t\t\t...eventHandlers\n\t\t};\n\n\t\tconst { waves } = this.state;\n\n\t\tconst ripple = !disabled ? (\n\t\t\t<div className=\"ripple\" key={'ripple'} ref={'ripple'}>\n\t\t\t\t<ReactCSSTransitionGroup className=\"waves\" key=\"waves\">\n\t\t\t\t\t{waves}\n\t\t\t\t</ReactCSSTransitionGroup>\n\t\t\t</div>\n\t\t) : null;\n\n\t\tconst grandchildren = [children, ripple];\n\n\t\treturn isValidElement(container)\n\t\t\t? cloneElement(container, rippleProps, grandchildren)\n\t\t\t: createElement(container, rippleProps, grandchildren)\n\t\t;\n\t}\n\n\tstart(e) {\n\t\tconst { isCenter, disabled } = this.props;\n\t\tconst { waves, key } = this.state;\n\t\tconst size = this.size;\n\t\tlet wave = 'wave-'+ key;\n\t\t//debugger;\n\n\t\tconst style = this._getRippleStyle(e, isCenter, size);\n\n\t\t!disabled && waves.push(\n\t\t\t<Wave ref=\"RippleWave\" key={wave} size={size}\n\t\t\t      style={isCenter ? {\n\t\t\t\t      ...style,\n\t\t\t\t      ...{\n\t\t\t\t\t      top: '-100%',\n\t\t\t\t\t      right: '-100%',\n\t\t\t\t\t      bottom: '-100%',\n\t\t\t\t\t      left: '-100%',\n\t\t\t\t\t      margin: 'auto'\n\t\t\t\t      }\n\t\t\t      } : style} />\n\t\t);\n\t\tthis.setState({\n\t\t\twaves: waves,\n\t\t\tkey: key + 1\n\t\t});\n\t}\n\n\tend(e) {\n\t\tthis._ignoreNextMouseDown = false;\n\t\tconst { waves } = this.state;\n\n\t\tif ( waves.length ) {\n\t\t\twaves.shift();\n\t\t\tthis.setState({\n\t\t\t\twaves\n\t\t\t});\n\t\t}\n\t}\n\n\t_getRippleStyle(e, isCenter, size) {\n\t\tlet style = {};\n\t\tconst el = findDOMNode(this);\n\t\tconst elHeight = el.offsetHeight;\n\t\tconst elWidth = el.offsetWidth;\n\t\tconst offset = Offset(el);\n\t\tconst isTouchEvent = e.touches && e.touches.length;\n\t\tconst pageX = isTouchEvent ? e.touches[0].pageX : e.pageX;\n\t\tconst pageY = isTouchEvent ? e.touches[0].pageY : e.pageY;\n\t\tconst pointerX = pageX - offset.left;\n\t\tconst pointerY = pageY - offset.top;\n\t\tconst topLeftDiag = Ripple._calcDiag(pointerX, pointerY);\n\t\tconst topRightDiag = Ripple._calcDiag(elWidth - pointerX, pointerY);\n\t\tconst botRightDiag = Ripple._calcDiag(elWidth - pointerX, elHeight - pointerY);\n\t\tconst botLeftDiag = Ripple._calcDiag(pointerX, elHeight - pointerY);\n\t\tconst rippleRadius = Math.max(\n\t\t\ttopLeftDiag, topRightDiag, botRightDiag, botLeftDiag\n\t\t);\n\t\t//const { size } = this.state;\n\t\tconst rippleSize = isCenter ? size.max : rippleRadius * 2;\n\t\tconst left = pointerX - rippleRadius;\n\t\tconst top = pointerY - rippleRadius;\n\n\t\tstyle.height = rippleSize + 'px';\n\t\tstyle.width = rippleSize + 'px';\n\n\t\tstyle.top = top + 'px';\n\t\tstyle.left = left + 'px';\n\t\treturn style;\n\t}\n\n\tstatic _calcDiag(a, b) {\n\t\treturn Math.sqrt((a * a) + (b * b));\n\t}\n\n}\n\nclass Wave extends Component {\n\n\tstatic propTypes = {\n\t\tsize: PropTypes.object.isRequired,\n\t\tstyle: PropTypes.object.isRequired\n\t};\n\n\tcomponentWillAppear(callback) {\n\t\tthis._initializeAnimation(callback);\n\t}\n\tcomponentWillEnter(callback) {\n\t\tthis._initializeAnimation(callback);\n\t}\n\tcomponentDidAppear() {\n\t\tthis._animate();\n\t}\n\tcomponentDidEnter() {\n\t\tthis._animate();\n\t}\n\tcomponentWillLeave(callback) {\n\t\tlet style = ReactDOM.findDOMNode(this).style;\n\t\tstyle.opacity = 0;\n\n\t\tlet timeOut = null;\n\n\t\ttimeOut = setTimeout(() => {\n\t\t\tif (isMounted(this)) callback();\n\t\t\twindow.clearTimeout(timeOut);\n\t\t}, 1000);\n\t}\n\n\trender() {\n\n\t\tconst { size, style } = this.props;\n\n\t\treturn (\n\t\t\t<div className=\"wave\" style={{\n\t\t\t\t...{\n\t\t\t\t\t//backgroundColor: 'rgb(0,0,0)'\n\t\t\t\twidth: size.min\n\t\t\t\t, height: size.min\n\t\t\t\t},\n\t\t\t\t...style\n\t\t\t}}></div>\n\t\t);\n\t}\n\n\t_animate() {\n\t\tlet style = ReactDOM.findDOMNode(this).style;\n\t\tconst transitionValue = (\n\t\t\tTransitions.easeOut('2s', 'opacity') + ',' +\n\t\t\tTransitions.easeOut('1.5s', 'transform')\n\t\t);\n\t\tAutoPrefix.set(style, 'transition', transitionValue);\n\t\tAutoPrefix.set(style, 'transform', 'scale(1)');\n\t}\n\t_initializeAnimation(callback) {\n\t\tlet style = ReactDOM.findDOMNode(this).style;\n\t\tstyle.opacity = .26;\n\t\tAutoPrefix.set(style, 'transform', 'scale(0)');\n\t\tlet timeOut = null;\n\t\ttimeOut = setTimeout(() => {\n\t\t\tif (isMounted(this)) callback();\n\t\t\twindow.clearTimeout(timeOut);\n\t\t}, 0);\n\t}\n\n}\n\nexport default Ripple"]}